<div class="row">
    <mat-card class="card">
        <mat-card-title>Reports</mat-card-title>
        <mat-card-subtitle align="center">{{chartTitle}}</mat-card-subtitle>
        <div class="div-chart" id="{{chartName}}">
            <img class="placeholder-img" mat-card-image src="assets/images/chart-placeholder.png">
        </div>
        <mat-card-content class="text-center">
            <mat-progress-bar mode="indeterminate" hidden="progressBarIsHidden"></mat-progress-bar>
            <mat-error *ngIf="emptyJSONReturned">There is no data for the selected plot!</mat-error>
                <section class="plotSelectionSection">
                    <mat-card-subtitle class="chart-select-title" align="left">Select chart</mat-card-subtitle>
                    <mat-form-field>
                        <mat-select placeholder="Chart"
                                    #chartSelect
                                    [(value)]="selectedChart"
                                    required
                                    name="chart"
                                    [formControl]="chartFormControl">
                            <mat-option *ngFor="let chart of charts" [value]="chart">
                                {{chart.viewValue}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="selectedChart.errorState && chartFormControl.hasError('required')">
                            Chart is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-select placeholder="Grouped by"
                                    #groupingSelect
                                    required
                                    [(value)]="selectedGrouping"
                                    [formControl]="groupingFormControl">
                            <mat-optgroup *ngFor="let groupCluster of selectedChart.groupingClusters"
                                          [label]="groupCluster.name"
                                          [hidden]="groupCluster.disabled">
                                    <mat-option *ngFor="let group of groupCluster.groupings" [value]="group">
                                        {{group.viewValue}}
                                    </mat-option>
                            </mat-optgroup>
                        </mat-select>
                        <mat-error *ngIf="groupingSelect.errorState && groupingFormControl.hasError('required')">
                            Grouped by is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </section>
            <mat-card-actions>
                <button (click)="submit()" [disabled]="groupingSelect.errorState && groupingFormControl.hasError('required')"
                        mat-raised-button color="primary">
                    Submit
                </button>
            </mat-card-actions>
        </mat-card-content>
    </mat-card>
</div>

